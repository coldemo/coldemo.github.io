(this["webpackJsonpgallery.code"]=this["webpackJsonpgallery.code"]||[]).push([[5],{136:function(e,n,t){"use strict";t.d(n,"a",(function(){return p}));var r=t(8),a=t.n(r),o=t(134),i=t(10),c=t(95),u=t(114),s=t.n(u),d=t(0),l=function(e){return e?e.data:null},p=function(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:l,r=Object(d.useState)(null),u=Object(c.a)(r,2),p=u[0],m=u[1],f=Object(d.useState)(!1),v=Object(c.a)(f,2),h=v[0],b=v[1],g=Object(d.useState)(null),y=Object(c.a)(g,2),w=y[0],O=y[1],j=Object(d.useCallback)(Object(i.a)(a.a.mark((function t(){var r,i,c,u,d=arguments;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=d.length>0&&void 0!==d[0]?d[0]:{},i=r.pathParams||Object.create(null),c=n.replace(/\/:([^/?#&\d][^/?#&]*)/g,(function(e,n){return"/".concat(i[n])})),t.prev=3,b(!0),t.next=7,s()(Object(o.a)({method:e,url:c},r));case 7:u=t.sent,m(u),O(null),t.next=16;break;case 12:t.prev=12,t.t0=t.catch(3),m(null),O(t.t0);case 16:return t.prev=16,b(!1),t.finish(16);case 19:case"end":return t.stop()}}),t,null,[[3,12,16,19]])}))),[e,m,n]),N=Object(d.useCallback)((function(){return t(p)}),[t,p]);return{request:j,error:w,response:p,getData:N,loading:h}}},377:function(e,n){},401:function(e,n,t){},402:function(e,n,t){},711:function(e,n,t){"use strict";t.r(n),t.d(n,"Playground",(function(){return re}));t(377);var r=t(8),a=t.n(r),o=t(10),i=t(95),c=t(133),u=t(114),s=t.n(u),d=(t(378),t(379),t(380),t(382),t(383),t(393),t(409)),l=t(103),p=t.n(l),m=t(48),f=t.n(m),v=t(0),h=t.n(v),b=t(394),g=t(15),y=t.n(g),w=t(395),O=t(200),j=t.n(O),N=t(2),k=t(157),E=t(396),x=t.n(E),C=t(134),L=t(707),S=t(97),M=function(e){var n=e.spinning,t=Object(L.a)(e,["spinning"]),r=function(e){var n=Object(v.useState)(e),t=Object(i.a)(n,2),r=t[0],a=t[1],o=Object(v.useMemo)((function(){return p.a.debounce(a,1e3,{leading:!0,trailing:!0})}),[]);return Object(v.useEffect)((function(){return e?a(e):o(e),function(){o.cancel()}}),[e,o]),r}(n);return h.a.createElement(S.a,Object(C.a)(Object(C.a)({},t),{},{spinning:r}))},H=t(136),A=function(e,n){var t=Object(v.useCallback)((function(e){var n=e;return e&&e.target&&"value"in e.target&&(n=e.target.value),n}),[]),r=Object(v.useMemo)((function(){return[e,n||t]}),[e,n,t]),a=Object(i.a)(r,2),o=a[0],c=a[1],u=Object(v.useState)(o),s=Object(i.a)(u,2),d=s[0],l=s[1];return{value:d,controlled:{value:d,onChange:Object(v.useCallback)((function(e){for(var n=arguments.length,t=new Array(n>1?n-1:0),r=1;r<n;r++)t[r-1]=arguments[r];var a=c.apply(void 0,[e].concat(t));l(a)}),[c])}}},J=t(705),P=new Worker("./babel-worker.js"),T=function(){var e=Object(o.a)(a.a.mark((function e(n,t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,r){P.onerror=function(e){console.error(["worker onerror",e]),r(new Error("worker onerror - ".concat(n.slice(0,100))))},P.onmessage=function(n){var t=n.data;t.error?r(t.error):e(t.data)},P.postMessage({code:n,file:t})})));case 1:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}(),R=function(){var e=Object(o.a)(a.a.mark((function e(n,t){var r,o,i,c,u;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.endsWith(".md"),o=t.endsWith(".py"),i=t.endsWith(".vue"),!r){e.next=5;break}return e.abrupt("return",_(n));case 5:if(!o){e.next=7;break}return e.abrupt("return",D(n));case 7:if(!i){e.next=9;break}return e.abrupt("return",W(n));case 9:if(/\.csl\.([tj]sx?)$/.test(t)&&(t=t.replace(/(\.[tj]s)$/,"$1x"),n="\n      let main = async (console) => {\n        ;;".concat(n,";;\n      }\n      let App = () => {\n        let [logs, dispatchLogs] = useReducer((state, action) => {\n          if (action.type === 'append') return [...state, action.content]\n          return state\n        }, [])\n        useEffect(() => {\n          let myLog = (...args) => {\n            dispatchLogs({ type: 'append', content: JSON.stringify(args) })\n          }\n          let originalConsole = console\n          let mockConsole = new Proxy(originalConsole, {\n            get: (t, k) => {\n              if (k === 'log') return myLog\n              return t[k]\n            }\n          })\n          main(mockConsole)\n        }, [])\n        return (\n          <ul style={{ margin: '20px 0' }}>\n            {logs.map((v, i) => {\n              return <li key={i}>{v}</li>\n            })}\n          </ul>\n        )\n      }\n    ")),n=$(n),c=t&&[".jsx",".tsx"].some((function(e){return t.endsWith(e)})),u=t&&[".ts",".tsx"].some((function(e){return t.endsWith(e)})),!c&&!u){e.next=17;break}return e.next=16,T(n,t);case 16:n=e.sent;case 17:return e.abrupt("return",n);case 18:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}(),W=function(e){var n=document.createElement("div");n.innerHTML=e;var t=n.querySelector("template"),r=t?t.innerHTML:"",a="";n.querySelectorAll("script").forEach((function(e){a+=e.innerHTML+"\n\n;;"}));var o="";return n.querySelectorAll("style").forEach((function(e){o+=e.innerHTML+"\n\n"})),"\n(async () => {\n  let removeLoading = addLoading()\n  {\n    let a0 = assetsNode\n    a0.id = 'assetsNodeOutdated'\n    let a1 = document.createElement('div')\n    a1.id = 'assetsNode'\n    a0.parentNode.appendChild(a1)\n  }\n\n  ReactDOM.unmountComponentAtNode(mountNode)\n  mountNode.innerHTML = '' // put behind, otherwise can cause error in react\n\n  try {\n    await loadJs('https://unpkg.com/vue@2.6.11/dist/vue.min.js')\n    appendCss(".concat(JSON.stringify(o),")\n\n    let module = { exports: null }\n    ;(() => {\n      ;;").concat(a,";;\n    })()\n    let App = module.exports\n    App.template = ").concat(JSON.stringify(r),"\n\n    if (!mountNode.children[0]) {\n      let innerNode = document.createElement('div')\n      mountNode.appendChild(innerNode)\n    }\n    let curr = mountNode.children[0]\n    new Vue(App).$mount(curr)\n    {\n      let a0 = assetsNodeOutdated\n      if (a0.parentNode) a0.parentNode.removeChild(a0)\n    }\n  } catch (err) {\n    console.error(['displayError', err])\n    displayError(err)\n  } finally {\n    removeLoading()\n  }\n})()\n  ").trim()},_=function(e){return"\n(async () => {\n  let removeLoading = addLoading()\n  {\n    let a0 = assetsNode\n    a0.id = 'assetsNodeOutdated'\n    let a1 = document.createElement('div')\n    a1.id = 'assetsNode'\n    a0.parentNode.appendChild(a1)\n  }\n\n  ReactDOM.unmountComponentAtNode(mountNode)\n  mountNode.innerHTML = '' // put behind, otherwise can cause error in react\n\n  try {\n    await loadJs('https://unpkg.com/vditor@3.2.0/dist/method.min.js')\n    await loadCss('https://unpkg.com/vditor@3.2.0/dist/index.css')\n\n    appendCss(`\n    #mdPreview { padding: 16px 16px 32px }\n    #mdPreview > *:first-child { margin-top: 0 !important }\n    .vditor-speech { left: 2px !important }\n    `)\n\n    appendHtml(`\n    <div id=\"mdPreview\"></div>\n    `)\n\n    // Code from https://markdown.lovejade.cn/\n    // let onloadCallback = oEvent => {}\n\n    // Code from https://github.com/Vanessa219/vditor/blob/master/demo/static-preview.html\n    await Vditor.preview(mdPreview, ".concat(JSON.stringify(e),', {\n      markdown: { toc: true },\n      speech: { enable: true },\n      anchor: true,\n      // after () {\n      //   Vditor.outlineRender(mdPreview, document.getElementById(\'outline\'))\n      // },\n      lazyLoadImage: \'https://cdn.jsdelivr.net/npm/vditor/dist/images/img-loading.svg\',\n      renderers: {\n        renderHeading: (node, entering) => {\n          if (entering) {\n            const id = Lute.GetHeadingID(node)\n            return [\n              `<h${node.__internal_object__.HeadingLevel} class="vditor__heading">\n<a id="vditorAnchor-${id}" class="vditor-anchor" href="javascript:void 0"></a>\n<span class="prefix"></span><span>`,\n              Lute.WalkContinue]\n          } else {\n            return [`</span></h${\n              node.__internal_object__.HeadingLevel\n            }>`, Lute.WalkContinue]\n          }\n        },\n      },\n    })\n\n    {\n      let a0 = assetsNodeOutdated\n      if (a0.parentNode) a0.parentNode.removeChild(a0)\n    }\n  } catch (err) {\n    console.error([\'displayError\', err])\n    displayError(err)\n  } finally {\n    removeLoading()\n  }\n})()\n  ').trim()},D=function(e){return"\n(async () => {\n  let removeLoading = addLoading()\n  {\n    let a0 = assetsNode\n    a0.id = 'assetsNodeOutdated'\n    let a1 = document.createElement('div')\n    a1.id = 'assetsNode'\n    a0.parentNode.appendChild(a1)\n  }\n\n  ReactDOM.unmountComponentAtNode(mountNode)\n  mountNode.innerHTML = '' // put behind, otherwise can cause error in react\n\n  try {\n    // await loadJs('http://www.skulpt.org/js/skulpt.min.js')\n    // await loadJs('http://www.skulpt.org/js/skulpt-stdlib.js')\n    await loadJs('./skulpt.min.js')\n    await loadJs('./skulpt-stdlib.js')\n\n    appendCss(`\n    #py-container { padding: 20px }\n    #py-output { white-space: pre-line }\n    #py-canvas { transform: scale(0.7); transform-origin: top center; }\n    `)\n\n    let outf = (text) => {\n      let mypre = document.getElementById(\"py-output\");\n      mypre.innerHTML = mypre.innerHTML + text;\n    }\n    let builtinRead = (x) => {\n      if (Sk.builtinFiles === undefined || Sk.builtinFiles[\"files\"][x] === undefined)\n        throw \"File not found: '\" + x + \"'\";\n      return Sk.builtinFiles[\"files\"][x];\n    }\n\n    setTimeout(() => {\n      let prog = ".concat(JSON.stringify(e),";\n      Sk.pre = \"py-output\";\n      Sk.configure({ output: outf, read: builtinRead });\n\n      (Sk.TurtleGraphics || (Sk.TurtleGraphics = {})).target = 'py-canvas';\n      let myPromise = Sk.misceval.asyncToPromise(function() {\n        return Sk.importMainWithBody(\"<stdin>\", false, prog, true);\n      });\n      myPromise.then(function(mod) {\n        console.log('success');\n      }, function(err) {\n        console.error(['displayError', err])\n        displayError(err)\n      });\n    }, 0)\n\n    let h = React.createElement\n    ReactDOM.render(h('div', { id: 'py-container' }, [\n      h('pre', { key: 1, id: 'py-output' }),\n      h('div', { key: 2, id: 'py-canvas' }),\n    ]), mountNode)\n    {\n      let a0 = assetsNodeOutdated\n      if (a0.parentNode) a0.parentNode.removeChild(a0)\n    }\n  } catch (err) {\n    console.error(['displayError', err])\n    displayError(err)\n  } finally {\n    removeLoading()\n  }\n})()\n  ").trim()},$=function(e){return"\n(async () => {\n  let removeLoading = addLoading()\n  {\n    let a0 = assetsNode\n    a0.id = 'assetsNodeOutdated'\n    let a1 = document.createElement('div')\n    a1.id = 'assetsNode'\n    a0.parentNode.appendChild(a1)\n  }\n\n  ReactDOM.unmountComponentAtNode(mountNode)\n  mountNode.innerHTML = '' // put behind, otherwise can cause error in react\n\n  try {\n    let { useRef, useMemo, useState, useEffect, useLayoutEffect, useReducer, useContext, useCallback, useImperativeHandle } = React\n\n    ;;".concat(e,";;\n\n    if (typeof App !== 'undefined') {\n      let isVueLike = _.isPlainObject(App)\n      if (isVueLike) {\n        if (!mountNode.children[0]) {\n          let innerNode = document.createElement('div')\n          mountNode.appendChild(innerNode)\n        }\n        let curr = mountNode.children[0]\n        new Vue(App).$mount(curr)\n      } else {\n        ReactDOM.render(React.createElement(App), mountNode)\n      }\n    }\n    {\n      let a0 = assetsNodeOutdated\n      if (a0.parentNode) a0.parentNode.removeChild(a0)\n    }\n  } catch (err) {\n    console.error(['displayError', err])\n    displayError(err)\n  } finally {\n    removeLoading()\n  }\n})()\n  ").trim()},I=(t(401),t(402),t(403)),q=t(148),F=t(149),V=t(404);function z(){var e=Object(I.a)(["\n  font-size: 12px;\n  color: red;\n  white-space: pre-wrap;\n  padding: 10px;\n"]);return z=function(){return e},e}function B(){var e=Object(I.a)(["\n  height: 100%;\n  min-height: 100px;\n  overflow-y: auto;\n  word-break: break-word;\n"]);return B=function(){return e},e}function G(){var e=Object(I.a)(["\n  height: 100%;\n"]);return G=function(){return e},e}function U(){var e=Object(I.a)(["\n    flex-direction: column;\n  "]);return U=function(){return e},e}function X(){var e=Object(I.a)(["\n  height: 100%;\n  display: flex;\n\n  ","\n"]);return X=function(){return e},e}var K=Object(k.b)(q.a)(X(),V.a.lessThan("medium")(U())),Q=Object(k.b)(F.a)(G()),Y=k.b.div(B()),Z=k.b.pre(z()),ee=function(e){var n=document.querySelector("#mountNode"),t=e&&e.stack||String(e),r=p.a.get(e,"args.v");r&&(t+="\n"+JSON.stringify(r)),y.a.render(h.a.createElement(Z,null,t),n)},ne=function(){var e=Object(o.a)(a.a.mark((function e(n){var t,r,o,i,c,u,d;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.url,r=n.name,o=n.deps,i=void 0===o?{}:o,c="",e.prev=2,e.next=5,s()(t);case 5:u=e.sent,d=u.data,c=d,e.next=13;break;case 10:throw e.prev=10,e.t0=e.catch(2),new Error("loadJsForceUmd - ".concat(e.t0.message," - ").concat(t));case 13:c="\n    (() => {\n      let module = { exports: {} }\n      let require = k => {\n        ".concat(Object.keys(i).map((function(e){return"if (k === ".concat(JSON.stringify(e),") return ").concat(i[e])})).join("\n"),"\n        throw new Error(`module '${k}' not found`)\n      }\n      ;;").concat(c,";;\n      window[").concat(JSON.stringify(r),"] = module.exports\n    })()\n  "),te(c);case 15:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(n){return e.apply(this,arguments)}}(),te=function(e){var n=document.createElement("script");n.innerHTML=e,window.assetsNode.appendChild(n)};Object.assign(window,{useFormBinding:A,useInterval:function(e,n){Object(v.useEffect)((function(){var t=setInterval((function(){e()}),n);return function(){t&&clearInterval(t)}}),[e,n])},useModel:function(e,n,t){var r=Object(v.useReducer)(e,n),a=Object(i.a)(r,2),o=a[0],c=a[1];return[o,Object(v.useMemo)((function(){return p.a.reduce(t,(function(e,n,t){return e[t]=function(){var e=n.apply(void 0,arguments),r=Object(C.a)({type:t},e);return c(r)},e}),Object.create(null))}),[t,c])]},moment:f.a,styled:k.b,immer:d.a,_:p.a,axios:s.a,Antd:c,React:h.a,ReactDOM:y.a,sleep:function(e){return new Promise((function(n){setTimeout(n,e)}))},displayError:ee,loadJsForceUmd:ne,loadJs:function e(n){return Array.isArray(n)?Promise.all(n.map(e)).then((function(){})):new Promise((function(e,t){var r=document.createElement("script");r.src=n,r.onload=function(){e()},r.onerror=function(e){t(new Error("loadJs onerror - ".concat(n)))},window.assetsNode.appendChild(r)}))},loadCss:function e(n){return Array.isArray(n)?Promise.all(n.map(e)).then((function(){})):new Promise((function(e,t){var r=document.createElement("link");r.rel="stylesheet",r.href=n,r.onload=function(){e()},r.onerror=function(e){t(new Error("loadCss onerror - ".concat(n)))},window.assetsNode.appendChild(r)}))},appendJs:te,appendCss:function(e){var n=document.createElement("style");n.innerHTML=e,window.assetsNode.appendChild(n)},appendHtml:function(e){window.mountNode.innerHTML+=e},setRendering:p.a.noop});var re=function(){var e=Object(N.g)(),n=Object(N.h)().file,t=(n=n||"").endsWith(".vue"),r=n.endsWith(".py"),c=n.endsWith(".md"),u=A("",(function(e,n,t){return t})),s=Object(H.a)("GET","code/:file"),d=s.request,l=s.error,m=s.response,f=s.loading;Object(v.useEffect)((function(){n?d({pathParams:{file:n}}):e.push("/")}),[n]),Object(v.useEffect)((function(){null!=m&&u.controlled.onChange(null,null,m.data)}),[m]),Object(v.useEffect)((function(){l&&ee(new Error("".concat(l.message," - ").concat(n)))}),[l]);var g=Object(v.useState)(""),y=Object(i.a)(g,2),O=y[0],k=y[1],E=Object(v.useState)(!1),C=Object(i.a)(E,2),L=C[0],S=C[1],P=Object(v.useState)(0),T=Object(i.a)(P,2),W=T[0],_=T[1],D=f||L||W>0,$=Object(v.useCallback)((function(){return _((function(e){return e+1})),function(){return _((function(e){return e-1}))}}),[]);Object.assign(window,{addLoading:$});var I=Object(v.useCallback)(function(){var e=Object(o.a)(a.a.mark((function e(t){var r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return");case 2:return S(!0),e.prev=3,e.next=6,R(t,n);case 6:r=e.sent,k(r),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(3),ee(e.t0);case 13:return e.prev=13,S(!1),e.finish(13);case 16:case"end":return e.stop()}}),e,null,[[3,10,13,16]])})));return function(n){return e.apply(this,arguments)}}(),[n]);!function(e,n,t){e=e||{};var r=Object(v.useMemo)((function(){return e.debounce?p.a.debounce(n,e.debounce,e.options):e.throttle?p.a.throttle(n,e.throttle,e.options):n}),[n,e.debounce,e.options,e.throttle]);Object(v.useEffect)((function(){e.singleton&&"cancel"in r&&r.cancel(),r.apply(void 0,Object(J.a)(t))}),t),Object(v.useEffect)((function(){return e.initial&&("cancel"in r&&r.cancel(),n.apply(void 0,Object(J.a)(t))),function(){e.cancel&&"cancel"in r&&r.cancel()}}),[])}({debounce:1e3,cancel:!0,singleton:!0},I,[u.value]),window.triggerPreview=function(){I(u.value+"\n\n/* ".concat(new Date," */"))};var q=x()({minWidth:"768px"}),F=Object(v.useCallback)((function(){var e=new Event("resize");window.mountNode.dispatchEvent(e)}),[]);return Object(v.useEffect)((function(){return window.addEventListener("resize",F),function(){window.removeEventListener("resize",F)}}),[F]),h.a.createElement("div",{className:"page-playground"},h.a.createElement(j.a,null,h.a.createElement("title",null,"Playground",n?" - ".concat(n):""),h.a.createElement("style",null,"html { overflow: hidden } #root { height: 100% }"),h.a.createElement("script",null,O)),h.a.createElement(K,null,h.a.createElement(Q,{style:{flex:1,overflowX:"auto"}},h.a.createElement(M,{spinning:D},h.a.createElement(Y,{id:"mountNode"}),h.a.createElement("div",{id:"assetsNode"}))),h.a.createElement(w.a,Object.assign({className:"editor-area",onUpdate:F},q?{border:"left",style:{minWidth:"20%",maxWidth:"80%",width:"50%"}}:{border:"top",style:{minHeight:"20%",maxHeight:"80%",height:"50%"}}),h.a.createElement(Q,null,h.a.createElement(b.Controlled,{className:"main-editor",options:{mode:c?"markdown":t?"vue":r?"python":"text/typescript-jsx",theme:"material",lineNumbers:!0},value:u.controlled.value,onBeforeChange:u.controlled.onChange})))))}}}]);
//# sourceMappingURL=5.0738f958.chunk.js.map
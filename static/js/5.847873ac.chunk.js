(this["webpackJsonpgallery.code"]=this["webpackJsonpgallery.code"]||[]).push([[5],{138:function(e,n,t){"use strict";t.d(n,"a",(function(){return p}));var r=t(8),a=t.n(r),o=t(136),c=t(10),i=t(96),u=t(114),s=t.n(u),l=t(0),d=function(e){return e?e.data:null},p=function(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:d;return function(){var r=Object(l.useState)(null),u=Object(i.a)(r,2),d=u[0],p=u[1],f=Object(l.useState)(!1),m=Object(i.a)(f,2),b=m[0],v=m[1],h=Object(l.useState)(null),O=Object(i.a)(h,2),y=O[0],w=O[1],j=Object(l.useCallback)(Object(c.a)(a.a.mark((function t(){var r,c,i,u,l=arguments;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=l.length>0&&void 0!==l[0]?l[0]:{},c=r.pathParams||Object.create(null),i=n.replace(/\/:([^/?#&\d][^/?#&]*)/g,(function(e,n){return"/".concat(c[n])})),t.prev=3,v(!0),t.next=7,s()(Object(o.a)({method:e,url:i},r));case 7:u=t.sent,p(u),w(null),t.next=16;break;case 12:t.prev=12,t.t0=t.catch(3),p(null),w(t.t0);case 16:return t.prev=16,v(!1),t.finish(16);case 19:case"end":return t.stop()}}),t,null,[[3,12,16,19]])}))),[e,p,n]),g=Object(l.useCallback)((function(){return t(d)}),[t,d]);return{request:j,error:y,response:d,getData:g,loading:b}}()}},378:function(e,n){},400:function(e,n,t){},711:function(e,n,t){"use strict";t.r(n),t.d(n,"Playground",(function(){return te}));t(378);var r=t(8),a=t.n(r),o=t(10),c=t(96),i=t(135),u=t(114),s=t.n(u),l=(t(379),t(380),t(381),t(382),t(392),t(407)),d=t(123),p=t.n(d),f=t(49),m=t.n(f),b=t(0),v=t.n(b),h=t(393),O=t(15),y=t.n(O),w=t(394),j=t(211),g=t.n(j),E=t(6),N=t(160),k=t(395),x=t.n(k),C=t(136),S=t(707),L=t(98),M=function(e){var n=e.spinning,t=Object(S.a)(e,["spinning"]),r=function(e){var n=Object(b.useState)(e),t=Object(c.a)(n,2),r=t[0],a=t[1],o=Object(b.useMemo)((function(){return p.a.debounce(a,1e3,{leading:!0,trailing:!0})}),[]);return Object(b.useEffect)((function(){return e?a(e):o(e),function(){o.cancel()}}),[e,o]),r}(n);return v.a.createElement(L.a,Object(C.a)({},t,{spinning:r}))},T=t(138),A=function(e,n){var t=Object(b.useCallback)((function(e){var n=e;return e&&e.target&&"value"in e.target&&(n=e.target.value),n}),[]),r=Object(b.useMemo)((function(){return[e,n||t]}),[e,n,t]),a=Object(c.a)(r,2),o=a[0],i=a[1],u=Object(b.useState)(o),s=Object(c.a)(u,2),l=s[0],d=s[1];return{value:l,controlled:{value:l,onChange:Object(b.useCallback)((function(e){for(var n=arguments.length,t=new Array(n>1?n-1:0),r=1;r<n;r++)t[r-1]=arguments[r];var a=i.apply(void 0,[e].concat(t));d(a)}),[i])}}},J=t(705),H=new Worker("./babel-worker.js"),R=function(){var e=Object(o.a)(a.a.mark((function e(n,t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,r){H.onerror=function(e){console.error(["worker onerror",e]),r(new Error("worker onerror - ".concat(n.slice(0,100))))},H.onmessage=function(n){var t=n.data;t.error?r(t.error):e(t.data)},H.postMessage({code:n,file:t})})));case 1:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}(),P=function(){var e=Object(o.a)(a.a.mark((function e(n,t){var r,o,c,i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.endsWith(".py"),o=t.endsWith(".vue"),!r){e.next=4;break}return e.abrupt("return",q(n));case 4:if(!o){e.next=6;break}return e.abrupt("return",W(n));case 6:if(n=D(n),c=t&&[".jsx",".tsx"].some((function(e){return t.endsWith(e)})),i=t&&[".ts",".tsx"].some((function(e){return t.endsWith(e)})),!c&&!i){e.next=13;break}return e.next=12,R(n,t);case 12:n=e.sent;case 13:return e.abrupt("return",n);case 14:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}(),W=function(e){var n=document.createElement("div");n.innerHTML=e;var t=n.querySelector("template"),r=t?t.innerHTML:"",a="";n.querySelectorAll("script").forEach((function(e){a+=e.innerHTML+"\n\n;;"}));var o="";return n.querySelectorAll("style").forEach((function(e){o+=e.innerHTML+"\n\n"})),"\n(async () => {\n  let removeLoading = addLoading()\n  {\n    let a0 = assetsNode\n    a0.id = 'assetsNodeOutdated'\n    let a1 = document.createElement('div')\n    a1.id = 'assetsNode'\n    a0.parentNode.appendChild(a1)\n  }\n\n  ReactDOM.unmountComponentAtNode(mountNode)\n  mountNode.innerHTML = '' // put behind, otherwise can cause error in react\n\n  try {\n    await loadJs('https://unpkg.com/vue@2.6.11/dist/vue.min.js')\n    appendCss(".concat(JSON.stringify(o),")\n\n    let module = { exports: null }\n    ;(() => {\n      ;;").concat(a,";;\n    })()\n    let App = module.exports\n    App.template = ").concat(JSON.stringify(r),"\n\n    if (!mountNode.children[0]) {\n      let innerNode = document.createElement('div')\n      mountNode.appendChild(innerNode)\n    }\n    let curr = mountNode.children[0]\n    new Vue(App).$mount(curr)\n    {\n      let a0 = assetsNodeOutdated\n      a0.parentNode.removeChild(a0)\n    }\n  } catch (err) {\n    console.error(['displayError', err])\n    displayError(err)\n  } finally {\n    removeLoading()\n  }\n})()\n  ").trim()},q=function(e){return"\n(async () => {\n  let removeLoading = addLoading()\n  {\n    let a0 = assetsNode\n    a0.id = 'assetsNodeOutdated'\n    let a1 = document.createElement('div')\n    a1.id = 'assetsNode'\n    a0.parentNode.appendChild(a1)\n  }\n\n  ReactDOM.unmountComponentAtNode(mountNode)\n  mountNode.innerHTML = '' // put behind, otherwise can cause error in react\n\n  try {\n    // await loadJs('http://www.skulpt.org/js/skulpt.min.js')\n    // await loadJs('http://www.skulpt.org/js/skulpt-stdlib.js')\n    await loadJs('./skulpt.min.js')\n    await loadJs('./skulpt-stdlib.js')\n\n    appendCss(`\n    #py-container { padding: 20px }\n    #py-canvas { transform: scale(0.7); transform-origin: top center; }\n    `)\n\n    let outf = (text) => {\n      let mypre = document.getElementById(\"py-output\");\n      mypre.innerHTML = mypre.innerHTML + text;\n    }\n    let builtinRead = (x) => {\n      if (Sk.builtinFiles === undefined || Sk.builtinFiles[\"files\"][x] === undefined)\n        throw \"File not found: '\" + x + \"'\";\n      return Sk.builtinFiles[\"files\"][x];\n    }\n\n    setTimeout(() => {\n      let prog = ".concat(JSON.stringify(e),";\n      Sk.pre = \"py-output\";\n      Sk.configure({ output: outf, read: builtinRead });\n\n      (Sk.TurtleGraphics || (Sk.TurtleGraphics = {})).target = 'py-canvas';\n      let myPromise = Sk.misceval.asyncToPromise(function() {\n        return Sk.importMainWithBody(\"<stdin>\", false, prog, true);\n      });\n      myPromise.then(function(mod) {\n        console.log('success');\n      }, function(err) {\n        console.error(['displayError', err])\n        displayError(String(err))\n      });\n    }, 0)\n\n    let h = React.createElement\n    ReactDOM.render(h('div', { id: 'py-container' }, [\n      h('pre', { key: 1, id: 'py-output' }),\n      h('div', { key: 2, id: 'py-canvas' }),\n    ]), mountNode)\n    {\n      let a0 = assetsNodeOutdated\n      a0.parentNode.removeChild(a0)\n    }\n  } catch (err) {\n    console.error(['displayError', err])\n    displayError(err)\n  } finally {\n    removeLoading()\n  }\n})()\n  ").trim()},D=function(e){return"\n(async () => {\n  let removeLoading = addLoading()\n  {\n    let a0 = assetsNode\n    a0.id = 'assetsNodeOutdated'\n    let a1 = document.createElement('div')\n    a1.id = 'assetsNode'\n    a0.parentNode.appendChild(a1)\n  }\n\n  ReactDOM.unmountComponentAtNode(mountNode)\n  mountNode.innerHTML = '' // put behind, otherwise can cause error in react\n\n  try {\n    let { useRef, useMemo, useState, useEffect, useLayoutEffect, useReducer, useContext, useCallback, useImperativeHandle } = React\n\n    ;;".concat(e,";;\n\n    if (typeof App !== 'undefined') {\n      let isVueLike = _.isPlainObject(App)\n      if (isVueLike) {\n        if (!mountNode.children[0]) {\n          let innerNode = document.createElement('div')\n          mountNode.appendChild(innerNode)\n        }\n        let curr = mountNode.children[0]\n        new Vue(App).$mount(curr)\n      } else {\n        ReactDOM.render(React.createElement(App), mountNode)\n      }\n    }\n    {\n      let a0 = assetsNodeOutdated\n      a0.parentNode.removeChild(a0)\n    }\n  } catch (err) {\n    console.error(['displayError', err])\n    displayError(err)\n  } finally {\n    removeLoading()\n  }\n})()\n  ").trim()},F=(t(400),t(401)),B=t(150),I=t(151),z=t(402);function G(){var e=Object(F.a)(["\n  font-size: 12px;\n  color: red;\n  white-space: pre-wrap;\n  padding: 10px;\n"]);return G=function(){return e},e}function V(){var e=Object(F.a)(["\n  height: 100%;\n  min-height: 100px;\n  overflow-y: auto;\n  word-break: break-word;\n"]);return V=function(){return e},e}function U(){var e=Object(F.a)(["\n  height: 100%;\n"]);return U=function(){return e},e}function $(){var e=Object(F.a)(["\n    flex-direction: column;\n  "]);return $=function(){return e},e}function _(){var e=Object(F.a)(["\n  height: 100%;\n  display: flex;\n\n  ","\n"]);return _=function(){return e},e}var X=Object(N.b)(B.a)(_(),z.a.lessThan("medium")($())),K=Object(N.b)(I.a)(U()),Q=N.b.div(V()),Y=N.b.pre(G()),Z=function(e){var n=document.querySelector("#mountNode");y.a.render(v.a.createElement(Y,null,e.stack),n)},ee=function(){var e=Object(o.a)(a.a.mark((function e(n){var t,r,o,c,i,u,l;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.url,r=n.name,o=n.deps,c=void 0===o?{}:o,i="",e.prev=2,e.next=5,s()(t);case 5:u=e.sent,l=u.data,i=l,e.next=13;break;case 10:throw e.prev=10,e.t0=e.catch(2),new Error("loadJsForceUmd - ".concat(e.t0.message," - ").concat(t));case 13:i="\n    (() => {\n      let module = { exports: {} }\n      let require = k => {\n        ".concat(Object.keys(c).map((function(e){return"if (k === ".concat(JSON.stringify(e),") return ").concat(c[e])})).join("\n"),"\n        throw new Error(`module '${k}' not found`)\n      }\n      ;;").concat(i,";;\n      window[").concat(JSON.stringify(r),"] = module.exports\n    })()\n  "),ne(i);case 15:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(n){return e.apply(this,arguments)}}(),ne=function(e){var n=document.createElement("script");n.innerHTML=e,window.assetsNode.appendChild(n)};Object.assign(window,{useFormBinding:A,useInterval:function(e,n){Object(b.useEffect)((function(){var t=setInterval((function(){e()}),n);return function(){t&&clearInterval(t)}}),[e,n])},useModel:function(e,n,t){var r=Object(b.useReducer)(e,n),a=Object(c.a)(r,2),o=a[0],i=a[1];return[o,Object(b.useMemo)((function(){return p.a.reduce(t,(function(e,n,t){return e[t]=function(){var e=n.apply(void 0,arguments),r=Object(C.a)({type:t},e);return i(r)},e}),Object.create(null))}),[t,i])]},moment:m.a,styled:N.b,immer:l.a,_:p.a,axios:s.a,Antd:i,React:v.a,ReactDOM:y.a,displayError:Z,loadJsForceUmd:ee,loadJs:function e(n){return Array.isArray(n)?Promise.all(n.map(e)).then((function(){})):new Promise((function(e,t){var r=document.createElement("script");r.src=n,r.onload=function(){e()},r.onerror=function(e){t(new Error("loadJs onerror - ".concat(n)))},window.assetsNode.appendChild(r)}))},loadCss:function e(n){return Array.isArray(n)?Promise.all(n.map(e)).then((function(){})):new Promise((function(e,t){var r=document.createElement("link");r.rel="stylesheet",r.href=n,r.onload=function(){e()},r.onerror=function(e){t(new Error("loadCss onerror - ".concat(n)))},window.assetsNode.appendChild(r)}))},appendJs:ne,appendCss:function(e){var n=document.createElement("style");n.innerHTML=e,window.assetsNode.appendChild(n)},appendHtml:function(e){window.mountNode.innerHTML+=e},setRendering:p.a.noop});var te=function(){var e=Object(E.g)(),n=Object(E.h)().file,t=n.endsWith(".vue"),r=n.endsWith(".py"),i=A("",(function(e,n,t){return t})),u=Object(T.a)("GET","code/index.yml"),s=u.request,l=u.response,d=u.loading,f=Object(T.a)("GET","code/:file"),m=f.request,O=f.error,y=f.response,j=f.loading,N=d||j;Object(b.useEffect)((function(){n?m({pathParams:{file:n}}):s()}),[n]),Object(b.useEffect)((function(){if(null!=l){var t=l.data.split(/\n/).map((function(e){return e.replace(/#.*/,"").trim()})).filter(Boolean).map((function(e){return e.replace(/^-\s*/,"")}))[0];e.push("/playground/".concat(n||t))}}),[n,l]),Object(b.useEffect)((function(){null!=y&&i.controlled.onChange(null,null,y.data)}),[y]),Object(b.useEffect)((function(){O&&Z(new Error("".concat(O.message," - ").concat(n)))}),[O]);var k=Object(b.useState)(""),C=Object(c.a)(k,2),S=C[0],L=C[1],H=Object(b.useState)(!1),R=Object(c.a)(H,2),W=R[0],q=R[1],D=Object(b.useState)(0),F=Object(c.a)(D,2),B=F[0],I=F[1],z=N||W||B>0,G=Object(b.useCallback)((function(){return I((function(e){return e+1})),function(){return I((function(e){return e-1}))}}),[]);Object.assign(window,{addLoading:G});var V=Object(b.useCallback)(function(){var e=Object(o.a)(a.a.mark((function e(t){var r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return");case 2:return q(!0),e.prev=3,e.next=6,P(t,n);case 6:r=e.sent,L(r),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(3),Z(e.t0);case 13:return e.prev=13,q(!1),e.finish(13);case 16:case"end":return e.stop()}}),e,null,[[3,10,13,16]])})));return function(n){return e.apply(this,arguments)}}(),[n]);!function(e,n,t){e=e||{};var r=Object(b.useMemo)((function(){return e.debounce?p.a.debounce(n,e.debounce,e.options):e.throttle?p.a.throttle(n,e.throttle,e.options):n}),[n,e.debounce,e.options,e.throttle]);Object(b.useEffect)((function(){e.singleton&&"cancel"in r&&r.cancel(),r.apply(void 0,Object(J.a)(t))}),t),Object(b.useEffect)((function(){return e.initial&&("cancel"in r&&r.cancel(),n.apply(void 0,Object(J.a)(t))),function(){e.cancel&&"cancel"in r&&r.cancel()}}),[])}({debounce:1e3,cancel:!0,singleton:!0},V,[i.value]),window.triggerPreview=function(){V(i.value+"\n\n/* ".concat(new Date," */"))};var U=x()({minWidth:"768px"}),$=Object(b.useCallback)((function(){var e=new Event("resize");window.mountNode.dispatchEvent(e)}),[]);return Object(b.useEffect)((function(){return window.addEventListener("resize",$),function(){window.removeEventListener("resize",$)}}),[$]),v.a.createElement("div",{className:"page-playground"},v.a.createElement(g.a,null,v.a.createElement("title",null,"Playground",n?" - ".concat(n):""),v.a.createElement("style",null,"html { overflow: hidden } #root { height: 100% }"),v.a.createElement("script",null,S)),v.a.createElement(X,null,v.a.createElement(K,{style:{flex:1,overflowX:"auto"}},v.a.createElement(M,{spinning:z},v.a.createElement(Q,{id:"mountNode"}),v.a.createElement("div",{id:"assetsNode"}))),v.a.createElement(w.a,Object.assign({onUpdate:$},U?{border:"left",style:{minWidth:"20%",maxWidth:"80%",width:"50%"}}:{border:"top",style:{minHeight:"20%",maxHeight:"80%",height:"50%"}}),v.a.createElement(K,null,v.a.createElement(h.Controlled,{className:"main-editor",options:{mode:t?"vue":r?"python":"text/typescript-jsx",theme:"material",lineNumbers:!0},value:i.controlled.value,onBeforeChange:i.controlled.onChange})))))}}}]);
//# sourceMappingURL=5.847873ac.chunk.js.map
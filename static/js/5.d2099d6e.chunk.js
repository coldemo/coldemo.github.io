(this["webpackJsonpgallery.code"]=this["webpackJsonpgallery.code"]||[]).push([[5],{136:function(e,n,t){"use strict";t.d(n,"a",(function(){return p}));var r=t(8),a=t.n(r),o=t(134),c=t(10),i=t(95),u=t(114),s=t.n(u),l=t(0),d=function(e){return e?e.data:null},p=function(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:d;return function(){var r=Object(l.useState)(null),u=Object(i.a)(r,2),d=u[0],p=u[1],f=Object(l.useState)(!1),m=Object(i.a)(f,2),b=m[0],v=m[1],h=Object(l.useState)(null),O=Object(i.a)(h,2),j=O[0],y=O[1],w=Object(l.useCallback)(Object(c.a)(a.a.mark((function t(){var r,c,i,u,l=arguments;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=l.length>0&&void 0!==l[0]?l[0]:{},c=r.pathParams||Object.create(null),i=n.replace(/\/:([^/?#&\d][^/?#&]*)/g,(function(e,n){return"/".concat(c[n])})),t.prev=3,v(!0),t.next=7,s()(Object(o.a)({method:e,url:i},r));case 7:u=t.sent,p(u),y(null),t.next=16;break;case 12:t.prev=12,t.t0=t.catch(3),p(null),y(t.t0);case 16:return t.prev=16,v(!1),t.finish(16);case 19:case"end":return t.stop()}}),t,null,[[3,12,16,19]])}))),[e,p,n]),g=Object(l.useCallback)((function(){return t(d)}),[t,d]);return{request:w,error:j,response:d,getData:g,loading:b}}()}},375:function(e,n){},389:function(e,n,t){},700:function(e,n,t){"use strict";t.r(n),t.d(n,"Playground",(function(){return ne}));t(375);var r=t(8),a=t.n(r),o=t(10),c=t(95),i=t(133),u=(t(376),t(377),t(380),t(381),t(121)),s=t.n(u),l=t(0),d=t.n(l),p=t(382),f=t(15),m=t.n(f),b=t(383),v=t(208),h=t.n(v),O=t(6),j=t(157),y=t(384),w=t.n(y),g=t(396),E=t(114),k=t.n(E),x=t(49),N=t.n(x),C=t(134),S=t(696),R=t(97),M=function(e){var n=e.spinning,t=Object(S.a)(e,["spinning"]),r=function(e){var n=Object(l.useState)(e),t=Object(c.a)(n,2),r=t[0],a=t[1],o=Object(l.useMemo)((function(){return s.a.debounce(a,1e3,{leading:!0,trailing:!0})}),[]);return Object(l.useEffect)((function(){e?a(e):o(e)}),[e,o]),r}(n);return d.a.createElement(R.a,Object(C.a)({},t,{spinning:r}))},P=t(136),T=function(e,n){var t=Object(l.useCallback)((function(e){var n=e;return e&&e.target&&"value"in e.target&&(n=e.target.value),n}),[]),r=Object(l.useMemo)((function(){return[e,n||t]}),[e,n,t]),a=Object(c.a)(r,2),o=a[0],i=a[1],u=Object(l.useState)(o),s=Object(c.a)(u,2),d=s[0],p=s[1];return{value:d,controlled:{value:d,onChange:Object(l.useCallback)((function(e){for(var n=arguments.length,t=new Array(n>1?n-1:0),r=1;r<n;r++)t[r-1]=arguments[r];var a=i.apply(void 0,[e].concat(t));p(a)}),[i])}}},A=t(694),J=new Worker("./babel-worker.js"),L=function(){var e=Object(o.a)(a.a.mark((function e(n,t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,r){J.onerror=function(e){console.error(["worker onerror",e]),r(new Error("worker onerror - ".concat(n.slice(0,100))))},J.onmessage=function(n){var t=n.data;t.error?r(t.error):e(t.data)},J.postMessage({code:n,file:t})})));case 1:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}(),H=function(){var e=Object(o.a)(a.a.mark((function e(n,t){var r,o;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.endsWith(".py")){e.next=3;break}return e.abrupt("return",W(n));case 3:if(n=D(n),r=t&&[".jsx",".tsx"].some((function(e){return t.endsWith(e)})),o=t&&[".ts",".tsx"].some((function(e){return t.endsWith(e)})),!r&&!o){e.next=10;break}return e.next=9,L(n,t);case 9:n=e.sent;case 10:return e.abrupt("return",n);case 11:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}(),W=function(e){return"\n(async () => {\n  setRendering(true)\n\n  let a0 = assetsNode\n  a0.id = 'assetsNodeOutdated'\n  let a1 = document.createElement('div')\n  a1.id = 'assetsNode'\n  a0.parentNode.appendChild(a1)\n\n  // mountNode.innerHTML = '' // can cause error in react\n  ReactDOM.unmountComponentAtNode(mountNode)\n\n  try {\n    await loadJs('https://www.skulpt.org/js/skulpt.min.js')\n    await loadJs('https://www.skulpt.org/js/skulpt-stdlib.js')\n\n    appendCss(`\n    #py-container { padding: 20px }\n    #py-canvas { transform: scale(0.7); transform-origin: top center; }\n    `)\n\n    let outf = (text) => {\n      let mypre = document.getElementById(\"py-output\");\n      mypre.innerHTML = mypre.innerHTML + text;\n    }\n    let builtinRead = (x) => {\n      if (Sk.builtinFiles === undefined || Sk.builtinFiles[\"files\"][x] === undefined)\n        throw \"File not found: '\" + x + \"'\";\n      return Sk.builtinFiles[\"files\"][x];\n    }\n\n    setTimeout(() => {\n      let prog = ".concat(JSON.stringify(e),";\n      Sk.pre = \"py-output\";\n      Sk.configure({ output: outf, read: builtinRead });\n\n      (Sk.TurtleGraphics || (Sk.TurtleGraphics = {})).target = 'py-canvas';\n      let myPromise = Sk.misceval.asyncToPromise(function() {\n        return Sk.importMainWithBody(\"<stdin>\", false, prog, true);\n      });\n      myPromise.then(function(mod) {\n        console.log('success');\n      }, function(err) {\n        console.error(['displayError', err])\n        displayError(String(err))\n      });\n    }, 0)\n\n    let h = React.createElement\n    ReactDOM.render(h('div', { id: 'py-container' }, [\n      h('pre', { key: 1, id: 'py-output' }),\n      h('div', { key: 2, id: 'py-canvas' }),\n    ]), mountNode)\n    a0.parentNode.removeChild(a0)\n  } catch (err) {\n    console.error(['displayError', err])\n    displayError(err)\n  } finally {\n    setRendering(false)\n  }\n})()\n  ").trim()},D=function(e){return"\n(async () => {\n  setRendering(true)\n\n  let a0 = assetsNode\n  a0.id = 'assetsNodeOutdated'\n  let a1 = document.createElement('div')\n  a1.id = 'assetsNode'\n  a0.parentNode.appendChild(a1)\n\n  // mountNode.innerHTML = '' // can cause error in react\n  ReactDOM.unmountComponentAtNode(mountNode)\n\n  try {\n    let { useRef, useMemo, useState, useEffect, useLayoutEffect, useReducer, useContext, useCallback, useImperativeHandle } = React\n\n    ;;".concat(e,";;\n\n    if (typeof App !== 'undefined') {\n      let isVueLike = _.isPlainObject(App)\n      if (isVueLike) {\n        if (!mountNode.children[0]) {\n          let innerNode = document.createElement('div')\n          mountNode.appendChild(innerNode)\n        }\n        let curr = mountNode.children[0]\n        new Vue(App).$mount(curr)\n      } else {\n        ReactDOM.render(React.createElement(App), mountNode)\n      }\n    }\n    a0.parentNode.removeChild(a0)\n  } catch (err) {\n    console.error(['displayError', err])\n    displayError(err)\n  } finally {\n    setRendering(false)\n  }\n})()\n  ").trim()},F=(t(389),t(390)),q=t(148),B=t(149),I=t(391);function z(){var e=Object(F.a)(["\n  font-size: 12px;\n  color: red;\n  white-space: pre-wrap;\n  padding: 10px;\n"]);return z=function(){return e},e}function G(){var e=Object(F.a)(["\n  height: 100%;\n  min-height: 100px;\n  overflow-y: auto;\n  word-break: break-word;\n"]);return G=function(){return e},e}function U(){var e=Object(F.a)(["\n  height: 100%;\n"]);return U=function(){return e},e}function V(){var e=Object(F.a)(["\n    flex-direction: column;\n  "]);return V=function(){return e},e}function $(){var e=Object(F.a)(["\n  height: 100%;\n  display: flex;\n\n  ","\n"]);return $=function(){return e},e}var _=Object(j.b)(q.a)($(),I.a.lessThan("medium")(V())),X=Object(j.b)(B.a)(U()),K=j.b.div(G()),Q=j.b.pre(z()),Y=function(e){var n=document.querySelector("#mountNode");m.a.render(d.a.createElement(Q,null,e.stack),n)},Z=function(){var e=Object(o.a)(a.a.mark((function e(n){var t,r,o,c,i,u,s;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.url,r=n.name,o=n.deps,c=void 0===o?{}:o,i="",e.prev=2,e.next=5,k()(t);case 5:u=e.sent,s=u.data,i=s,e.next=13;break;case 10:throw e.prev=10,e.t0=e.catch(2),new Error("loadJsForceUmd - ".concat(e.t0.message," - ").concat(t));case 13:i="\n    (() => {\n      let module = { exports: {} }\n      let require = k => {\n        ".concat(Object.keys(c).map((function(e){return"if (k === ".concat(JSON.stringify(e),") return ").concat(c[e])})).join("\n"),"\n        throw new Error(`module '${k}' not found`)\n      }\n      ;;").concat(i,";;\n      window[").concat(JSON.stringify(r),"] = module.exports\n    })()\n  "),ee(i);case 15:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(n){return e.apply(this,arguments)}}(),ee=function(e){var n=document.createElement("script");n.innerHTML=e,window.assetsNode.appendChild(n)};Object.assign(window,{useFormBinding:T,useInterval:function(e,n){Object(l.useEffect)((function(){var t=setInterval((function(){e()}),n);return function(){t&&clearInterval(t)}}),[e,n])},useModel:function(e,n,t){var r=Object(l.useReducer)(e,n),a=Object(c.a)(r,2),o=a[0],i=a[1];return[o,Object(l.useMemo)((function(){return s.a.reduce(t,(function(e,n,t){return e[t]=function(){var e=n.apply(void 0,arguments),r=Object(C.a)({type:t},e);return i(r)},e}),Object.create(null))}),[t,i])]},moment:N.a,styled:j.b,immer:g.a,_:s.a,axios:k.a,Antd:i,React:d.a,ReactDOM:m.a,displayError:Y,loadJsForceUmd:Z,loadJs:function e(n){return Array.isArray(n)?Promise.all(n.map(e)).then((function(){})):new Promise((function(e,t){var r=document.createElement("script");r.src=n,r.onload=function(){e()},r.onerror=function(e){t(new Error("loadJs onerror - ".concat(n)))},window.assetsNode.appendChild(r)}))},loadCss:function e(n){return Array.isArray(n)?Promise.all(n.map(e)).then((function(){})):new Promise((function(e,t){var r=document.createElement("link");r.rel="stylesheet",r.href=n,r.onload=function(){e()},r.onerror=function(e){t(new Error("loadCss onerror - ".concat(n)))},window.assetsNode.appendChild(r)}))},appendJs:ee,appendCss:function(e){var n=document.createElement("style");n.innerHTML=e,window.assetsNode.appendChild(n)},setRendering:s.a.noop});var ne=function(){var e=Object(O.g)(),n=Object(O.h)().file,t=n.endsWith(".py"),r=T("",(function(e,n,t){return t})),i=Object(P.a)("GET","code/index.yml"),u=i.request,f=i.response,m=i.loading,v=Object(P.a)("GET","code/:file"),j=v.request,y=v.error,g=v.response,E=v.loading,k=m||E;Object(l.useEffect)((function(){n?j({pathParams:{file:n}}):u()}),[n]),Object(l.useEffect)((function(){if(null!=f){var t=f.data.split(/\n/).map((function(e){return e.replace(/#.*/,"").trim()})).filter(Boolean).map((function(e){return e.replace(/^-\s*/,"")}))[0];e.push("/playground/".concat(n||t))}}),[n,f]),Object(l.useEffect)((function(){null!=g&&r.controlled.onChange(null,null,g.data)}),[g]),Object(l.useEffect)((function(){y&&Y(new Error("".concat(y.message," - ").concat(n)))}),[y]);var x=Object(l.useState)(""),N=Object(c.a)(x,2),C=N[0],S=N[1],R=Object(l.useState)(!1),J=Object(c.a)(R,2),L=J[0],W=J[1],D=Object(l.useState)(!1),F=Object(c.a)(D,2),q=F[0],B=F[1],I=k||L||q;Object.assign(window,{setRendering:B});var z=Object(l.useCallback)(function(){var e=Object(o.a)(a.a.mark((function e(t){var r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return");case 2:return W(!0),e.prev=3,e.next=6,H(t,n);case 6:r=e.sent,S(r),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(3),Y(e.t0);case 13:return e.prev=13,W(!1),e.finish(13);case 16:case"end":return e.stop()}}),e,null,[[3,10,13,16]])})));return function(n){return e.apply(this,arguments)}}(),[n]);!function(e,n,t){e=e||{};var r=Object(l.useMemo)((function(){return e.debounce?s.a.debounce(n,e.debounce,e.options):e.throttle?s.a.throttle(n,e.throttle,e.options):n}),[n,e.debounce,e.options,e.throttle]);Object(l.useEffect)((function(){e.singleton&&"cancel"in r&&r.cancel(),r.apply(void 0,Object(A.a)(t))}),t),Object(l.useEffect)((function(){return e.initial&&("cancel"in r&&r.cancel(),n.apply(void 0,Object(A.a)(t))),function(){e.cancel&&"cancel"in r&&r.cancel()}}),[])}({debounce:1e3,cancel:!0,singleton:!0},z,[r.value]),window.triggerPreview=function(){z(r.value+"\n\n/* ".concat(new Date," */"))};var G=w()({minWidth:"768px"}),U=Object(l.useCallback)((function(){var e=new Event("resize");window.mountNode.dispatchEvent(e)}),[]);return Object(l.useEffect)((function(){return window.addEventListener("resize",U),function(){window.removeEventListener("resize",U)}}),[U]),d.a.createElement("div",{className:"page-playground"},d.a.createElement(h.a,null,d.a.createElement("title",null,"Playground",n?" - ".concat(n):""),d.a.createElement("style",null,"html { overflow: hidden } #root { height: 100% }"),d.a.createElement("script",null,C)),d.a.createElement(_,null,d.a.createElement(X,{style:{flex:1,overflowX:"auto"}},d.a.createElement(M,{spinning:I},d.a.createElement(K,{id:"mountNode"}),d.a.createElement("div",{id:"assetsNode"}))),d.a.createElement(b.a,Object.assign({onUpdate:U},G?{border:"left",style:{minWidth:"20%",maxWidth:"80%",width:"50%"}}:{border:"top",style:{minHeight:"20%",maxHeight:"80%",height:"50%"}}),d.a.createElement(X,null,d.a.createElement(p.Controlled,{className:"main-editor",options:{mode:t?"python":"text/typescript-jsx",theme:"material",lineNumbers:!0},value:r.controlled.value,onBeforeChange:r.controlled.onChange})))))}}}]);
//# sourceMappingURL=5.d2099d6e.chunk.js.map